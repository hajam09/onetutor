WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-exception', location = 'includes/js/rapid/Exception.js' */
"use strict";AJS.namespace("GH.Layout");define("jira-agile/rapid/exception",["jira/util/logger","jira/util/data/meta","jquery","jira/util/formatter"],function(o,s,E,h){var g={errorPattern:/(com\.atlassian|com\.pyxis|jira\.webresources|batch|shortcuts\.js|RapidBoard\.jspa|RapidView\.jspa|ManageRapidViews\.jspa)/,isMessageExpanded:!1,errorCount:0,exceptionView:!1,handleJsException:function(e,t,n,i,a){window.console;var r=n;3<arguments.length&&(r+=":"+i);o.log("An exception has occurred in "+t+" at "+r+" --- "+e);g.errorCount++;r=null;4<arguments.length&&a&&a.stack&&(r=a.stack.split("\n"));if(g.errorPattern.test(t)){r={title:"An error occurred",details:{Exception:e,Resource:t,Line:n},stackTrace:r};3<arguments.length&&(r.details.Column=i);i=document.getElementById("ghx-errors");if(g.exceptionView){var l=g.buildExceptionMessage(r.details);g.exceptionView.msgView.setAttribute("style","display:block;");g.exceptionView.detailList.appendChild(l);g.exceptionView.titleView.getElementsByTagName("span")[1].innerHTML="("+g.errorCount+")"}else g.exceptionView=g.buildExceptionView(r);if(!i||""===i.innerHTML){l=g.exceptionView.msgView,r=document.createElement("div");r.setAttribute("class","ghx-exception");r.appendChild(l);l=i;if(!l){(l=document.createElement("div")).setAttribute("class","ghx-exception-wrapper");document.body.appendChild(l)}l.appendChild(r)}i&&(i.scrollTop=1e5);E(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE);return!s.get("dev-mode")}o.log("Ignoring file : "+t)},buildExceptionView:function(e){var t=document.createElement("div");t.setAttribute("class","aui-message aui-message-error closeable");var n=document.createElement("p");n.setAttribute("class","title");n.innerText=e.title;var i=document.createElement("a");i.setAttribute("class","ghx-more");i.innerHTML="Details&hellip;";n.appendChild(i);t.appendChild(n);var a=document.createElement("div");a.setAttribute("style","display: none;");i.onclick=function(e){if(g.isMessageExpanded){a.setAttribute("style","display: none;");i.innerHTML="Details&hellip;";g.isMessageExpanded=!1}else{a.setAttribute("style","position: relative;");i.innerHTML="Hide&hellip;";g.isMessageExpanded=!0}};var r=document.createElement("p");r.innerHTML='Please try refreshing the page, or contact your administrator / <a href="http://support.atlassian.com">Atlassian Support</a> if the problem continues.';a.appendChild(r);var l=document.createElement("div"),o=e.details,r=document.createElement("h4");r.innerHTML="Details";l.appendChild(r);var s=document.createElement("ol");l.appendChild(s);o=g.buildExceptionMessage(o);s.appendChild(o);a.appendChild(l);l=document.createElement("h4");l.innerHTML="Environment";a.appendChild(l);l=document.createElement("div");l.innerHTML=navigator.userAgent;a.appendChild(l);var d=e.stackTrace;if(d){var c=document.createElement("h3");c.innerHTML="Stack trace";a.appendChild(c);for(var p=document.createElement("ul"),u=0;u<d.length;u++){var m=document.createElement("li");m.innerHTML=d[u];p.appendChild(m)}a.appendChild(p)}c=document.createElement("a");c.innerHTML="<button type='button' class='aui-close-button' tabindex='0' aria-label='".concat(h.I18n.getText("aui.words.close"),"'></button>");n.appendChild(c);c.onclick=function(e){t.setAttribute("style","display:none;");s.innerHTML="";E(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE)};t.appendChild(a);return{msgView:t,detailList:s,titleView:n}},buildExceptionMessage:function(e){var t,n=document.createElement("li"),i=document.createElement("ul");n.appendChild(i);for(t in e)if(e.hasOwnProperty(t)){var a=document.createElement("li");a.innerHTML=t+": "+e[t];i.appendChild(a)}return n}};window.onerror=g.handleJsException});AJS.namespace("GH.Exception",null,require("jira-agile/rapid/exception"));
}catch(e){WRMCB(e)};